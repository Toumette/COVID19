<!DOCTYPE html>
<!-- ces 4 caractères marquent de début du commentaire.
Les commentaires ne sont pas affichés lors de la navigation normale.
Cependant ils sont envoyés au client est peuvent être vus, par exemple,
en affichant le "code source de la page".
Cette indication : <!DOCTYPE html> précise que la page est codée en HTML5
Elle doit se trouver en tout début de page.
Ces 3 caractères marquent la fin du commentaire -->

<html lang="fr"> <!-- Marque le début de la page -->
    
<head> <!-- Marque le début de l'en-tête de la page -->
        
<meta charset="utf-8" />
    <!-- Précise que, dans cette page, les caractères sont codés en utf-8 (si le serveur ne l'a pas précisé...) -->
        
    <!-- border: 4px blue double;  pour memoire -->
    
    <!-- FEUILLE DE STYLE CSS -->
    <style>
       h1
        {
            font-family: Arial;
            font-size: 3em;
            text-align: left;
        }

        p
        {
            color: black;
            font-size: 0.8em;
            text-align: justify;
        }

        ul
        {
            color: black;
            font-size: 1em;
        }

        .signature
        {
            color: black;
            font-size: 1em;
            text-align: right;
        }
 
        .centre
        {
            color: black;
            font-size: 2.5em;
			font-weight: bold;
            text-align: center;
        }
        
        .chiffres
        {
            color: red;
            font-size: 1.3em;
			font-weight: bold;
            text-align: left;
        }
        
        .groschiffres
        {
            color: red;
            font-size: 2.5em;
			font-weight: bold;
            text-align: left;
        }
        
        .discret
        {
            color: black;
            font-size: 0.8em;
            text-align: center;
        }

        #conteneur
        {
        display: flex;
        flex-wrap: nowrap;
        justify-content: space-between;
        }

    </style>
        
<title>COVID19</title>
        <!-- Le titre de la page est affiché dans l'onglet de la page par le navigateur.
        Ne pas mettre un titre trop long car, sinon, seul le début sera affiché -->
        
</head> <!-- Marque la fin de l'en-tête de la page -->


<body> <!-- Marque le début du corps de la page -->

<!-- AFFICHAGES HTML ====================================================== -->

<p class="centre">Victimes de la COVID19 dans le monde</p>

<!-- TEST SI JAVASCRIPT EST ACTIVE ======================================== -->
    
<SCRIPT>
<!--
document.write("<p>(Vous avez activé JavaScript, c'est parfait !)</p>");
// -->
</SCRIPT>

<NOSCRIPT>
<h1>/!\ ATTENTION /!\</h1>
JavaScript est désactivé !!! Veuillez activer JavaScript dans votre navigateur afin que je puisse disposer de l'environnement nécessaire pour effectuer mes calculs, puis recharger la page. Voici les <a href="https://www.enablejavascript.io/">
 instructions pour activer JavaScript dans votre navigateur Web</a>
</NOSCRIPT>
<hr>
    
<h3>Horodatage :</h3>
<p class="chiffres" id="date_1"></p>

<h3>Heure locale :</h3>
<p class="groschiffres" id="heure_1"></p>
<hr>

<h3>Nombre de personnes contaminées dans le monde :</h3>
<p class="groschiffres" id="contamines_1"></p>

<h3>Nombre de morts dans le monde :</h3>
<p class="groschiffres" id="morts_1"></p>
<hr>

<h3>Informations complémentaires :</h3>

<ul>
    <li>Les données "source" sont publiques. Elles proviennent de l'<a href="https://systems.jhu.edu/">Université Johns Hopkins</a> de Baltimore qui constitue la référence internationale depuis le début de la pandémie. J'ai simplement effectué une extrapolation linéaire et un lissage.</li>

    <li>Aucune information personnelle vous concernant n'est collectée (et, à fortiori, conservée), à votre insu, par ma page (contrairement à la quasi totalité des pages Web...).</li>

    <li>Le code source de cette page (côté serveur) est librement accessible depuis la page de liens de mon site Web : <a href="https://henri.nitnoc.me">https://henri.nitnoc.me</a>.</li>
	
    <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/">JavaScript</a> doit être activé dans votre navigateur (sans quoi je ne dispose pas de l'environnement nécessaire pour effectuer mes calculs). Voici les <a href="https://www.enablejavascript.io/fr/">instructions pour activer JavaScript dans votre navigateur Web</a>.</li>
	
    <li>Cette page est hébergée et publiée par <a href="https://github.com/">GitHub</a>.</li>
    
    <li>Le code source de cette page ainsi que les informations calculées sont fournis, sans aucune garantie, sous licence GNU General Public License v3.0 (voir <a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/licensing-a-repository#choosing-the-right-license">GitHub</a> pour précisions).</li>
    
</ul>

<p class="signature">© Henri - 23/05/2021 - <a href="https://henri.nitnoc.me">https://henri.nitnoc.me</a></p>

<hr>
    
<!-- validateur HTM -->
<p>Vous pouvez vérifier la validité du code HTML de ma page ici :</p>
<p><a href="https://validator.w3.org/check?uri=referer">
<img src = "http://www.w3.org/Icons/valid-xhtml10" alt = "Valid XHTML 1.0 Strict" height = "31" width = "88" /> </a> </p>


<SCRIPT>
    
// CALCUL DES MORTS ===========================================================

var msmorts = 6400 ;  // ENTRER le nombre de ms entre 2 morts
// document.write("ms entre 2 morts : " + msmorts); // ctrl ms entre 2 morts
// document.write("<br/><br/>");

var mortsref = 3454220 ;  // ENTRER le nombre de morts au dernier relevé
// document.write("morts au dernier relevé : " + mortsref); // ctrl morts entrés
// document.write("<br/><br/>");

var daterefms = Date.parse("2021-05-23T09:20:00");  // ENTRER la date du dernier relevé des morts (AAAA-MM-JJTHH:MM:SS)
var dateObjectref = new Date(daterefms);   // conversion ms pour date lisible
// document.write("horodatage relevé saisi _: " + dateObjectref); // ctrl date entrée
// document.write("<br/><br/>");

var dateactums = Date.now();  // date actuelle en ms trouvée au lancement de la page WEB
var dateActu = new Date(dateactums);   // conversion ms en date lisible
// document.write("horodatage actualisation : " + dateActu); // ctrl date actuelle trouvée
// document.write("<br/><br/>");

var ecartms = dateactums - daterefms;  // calcul temps écoulé depuis le dernier relevé

// document.write("temps écoulé en ms : " + ecartms); // ctrl temps écoulé ms depuis dernier relevé
// document.write("<br/><br/>");

var ecarth = ecartms / 3600000;    // calcul temps écoulé en heures pour ctrl
// document.write("temps écoulé en h : " + ecarth); // ctrl temps écoulé heures depuis le dernier relevé
// document.write("<br/><br/>");

var mortsajoutes = ecartms / msmorts;
// document.write("morts à ajouter depuis le dernier relevé : " + mortsajoutes); // ctrl morts à ajouter depuis le dernier relevé
// document.write("<br/><br/>");

var mortsajoutesint = Math.trunc(mortsajoutes);
// document.write("morts à ajouter depuis le dernier relevé : " + mortsajoutesint); // ctrl morts à ajouter
// document.write("<br/><br/>");

var mortsaffiche = mortsref + mortsajoutesint;
// document.write("valeur de départ morts à afficher : " + mortsaffiche); // ctrl morts à afficher en entrée de boucle
// document.write("<br/><br/>");



function myAffich() {
  mortsaffiche++;
  document.getElementById("morts_1").innerHTML = Intl.NumberFormat('de-DE').format(mortsaffiche);
}

var myVar = setInterval(myAffich, msmorts);


// CALCUL DES CAS =============================================================

var mscontam = 110 ;  // ENTRER le nombre de ms entre 2 cas
// document.write("ms entre 2 cas : " + mscontam); // ctrl ms entre 2 cas
// document.write("<br/><br/>");

var contamref = 166709528 ;  // ENTRER le nombre de cas au dernier relevé
// document.write("nombre de cas au dernier relevé : " + contamref); // ctrl cas entrés
// document.write("<br/><br/>");

var daterefcontamms = Date.parse("2021-05-23T09:20:00");  // ENTRER la date du dernier relevé des cas (AAAA-MM-JJTHH:MM:SS)
var dateObjectrefcontam = new Date(daterefcontamms);   // conversion ms pour date lisible
// document.write("horodatage relevé saisi _: " + dateObjectrefcontam); // ctrl date entrée
// document.write("<br/><br/>");

var dateactums = Date.now();  // date actuelle en ms trouvée au lancement de la page WEB
var dateActu = new Date(dateactums);   // conversion ms en date lisible
// document.write("horodatage actualisation : " + dateActu); // ctrl date actuelle trouvée
// document.write("<br/><br/>");

var ecartmscontam = dateactums - daterefcontamms;  // calcul temps écoulé depuis le dernier relevé

// document.write("temps écoulé en ms : " + ecartmscontam); // ctrl temps écoulé ms depuis le dernier relevé
// document.write("<br/><br/>");

var ecarthcontam = ecartmscontam / 3600000;    // calcul temps écoulé en heures pour ctrl
// document.write("temps écoulé en h : " + ecarthcontam); // ctrl temps écoulé heures depuis le dernier relevé
// document.write("<br/><br/>");

var contamajoutes = ecartmscontam / mscontam; // calcul cas à ajouter depuis le dernier relevé
// document.write("cas à ajouter depuis le dernier relevé : " + contamajoutes); // ctrl cas à ajouter depuis le dernier relevé
// document.write("<br/><br/>");

var contamajoutesint = Math.trunc(contamajoutes);  // extraction de la valeur entière
// document.write("cas à ajouter depuis le dernier relevé : " + contamajoutesint); // ctrl cas à ajouter
// document.write("<br/><br/>");

var contaminesaffiche = contamref + contamajoutesint;  // calcul nbre de cas en entrée de boucle
// document.write("valeur de départ nbre de cas à afficher : " + contaminesaffiche); // ctrl cas à afficher en entrée de boucle
// document.write("<br/><br/>");



// Mieux :
// const formater = new Intl.NumberFormat(locale, options)
// const texts = largeArray.map(formater.format, formater)

// new Intl.NumberFormat('fr-FR').format(3141596) // => '3 141 596'

// const formater = new Intl.NumberFormat('de-DE'); // instanciation

// document.write("test formatage : " + formater);
// document.write("<br/><br/>");



function myAffich_1() {
  contaminesaffiche++;
  document.getElementById("contamines_1").innerHTML = Intl.NumberFormat('de-DE').format(contaminesaffiche);
}

var myVar_1 = setInterval(myAffich_1, mscontam);


// CALCUL DE L'HEURE COURANTE =================================================

var tempsEnMs = Date.now(); 
var myVar = setInterval(myTimer, 1000);
function myTimer() {
  var d = new Date();
  var t = d.toLocaleTimeString();
  document.getElementById("date_1").innerHTML = d;
  document.getElementById("heure_1").innerHTML = t;
}

</SCRIPT>

<!--
</body> : Marque la fin du corps de la page
</html> : Marque la fin de la page
NB : La page est accessible a cette adresse :  https://Toumette.github.io/COVID19
-->
 
</body>
</html>
